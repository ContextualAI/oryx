export const metadata = {
  title: "React Hooks",
  description:
    "API reference for all React hooks provided by @contextualai/oryx-react.",
};

<DocsTitle title={"React Hooks"} backHref={"/"} />

Oryx provides a set of React hooks for managing chat state, message metadata, retrieval information, and streaming status. All hooks are exported from `@contextualai/oryx-react`.

# `useOryx` <AnchorTag id="use-oryx" />

The primary hook for managing Oryx chat state and streaming lifecycle. Returns control functions and a `probe` object to pass into `Oryx.Root`.

```tsx
const { probe, start, stop, states } = useOryx({ fetcher });

return <Oryx.Root probe={probe}>{/* ... */}</Oryx.Root>;
```

Parameters:

- <ParameterRow
    name="fetcher"
    type="OryxChatFetcher"
    description="The fetcher function that handles SSE streaming to your backend."
  />
- <ParameterRow
    name="extras"
    type="TExtras"
    description="Optional extra data passed to the fetcher (e.g., agentId, auth tokens)."
  />

Returns:

- <ParameterRow
    name="probe"
    type="OryxContextPayload"
    description="The payload object to pass into Oryx.Root."
  />
- <ParameterRow
    name="start"
    type="(prompt: string) => void"
    description="Start a new chat request with the given prompt."
  />
- <ParameterRow
    name="stop"
    type="() => void"
    description="Abort any in-flight streaming immediately."
  />
- <ParameterRow
    name="states"
    type="Record<string, OryxState>"
    description="A map of message IDs to their respective Oryx states."
  />

# `useOryxStatus` <AnchorTag id="use-oryx-status" />

Exposes the streaming status and error state for the current message.

> This hook must be used within `Oryx.Message.Agent` to read the status of the current message properly.

```tsx
const { isStreaming, error } = useOryxStatus();
```

- <ParameterRow
    name="isStreaming"
    type="boolean"
    description="Whether the current message is actively streaming."
  />
- <ParameterRow
    name="error"
    type="OryxStreamingError | null"
    description="Error object if the streaming pipeline failed."
  />

# `useOryxMessage` <AnchorTag id="use-oryx-message" />

Returns identifiers and state for the current message.

> This hook must be used within `Oryx.Message.Agent` to read the metadata of the current message properly.

```tsx
const { messageId, requestId, conversationId, state } = useOryxMessage();

return (
  <ul>
    <li>Message ID: {messageId}</li>
    <li>Request ID: {requestId}</li>
    <li>Conversation ID: {conversationId}</li>
  </ul>
);
```

- <ParameterRow
    name="messageId"
    type="string"
    description="Unique identifier for this message turn."
  />
- <ParameterRow
    name="requestId"
    type="string | null"
    description="Upstream request ID from the API."
  />
- <ParameterRow
    name="conversationId"
    type="string | null"
    description="Conversation thread ID, persisted across turns."
  />
- <ParameterRow
    name="state"
    type="OryxState"
    description="Full state object with message, status, and retrieval information."
  />

# `useOryxRetrievals` <AnchorTag id="use-oryx-retrievals" />

Returns the list of retrievals for the current message.

> This hook must be used within `Oryx.Message.Agent` to access retrievals properly.

```tsx
const { retrievals } = useOryxRetrievals();
```

- <ParameterRow
    name="retrievals"
    type="OryxRetrieval[]"
    description="Array of retrieval items for the current message."
  />

# `useOryxRetrievalItem` <AnchorTag id="use-oryx-retrieval-item" />

Returns the retrieval data for the current item.

> This hook must be used within `Oryx.Retrievals.List` or `Oryx.Retrievals.RawList`.

```tsx
const { retrieval } = useOryxRetrievalItem();
```

- <ParameterRow
    name="retrieval"
    type="OryxRetrieval"
    description="The retrieval item data including contentId, number, type, name, and snippet."
  />

# `useOryxContext` <AnchorTag id="use-oryx-context" />

Low-level hook to access the root Oryx context directly. Useful for building custom integrations outside the standard component tree.

> Prefer using `useOryx` for standard use cases. This hook is for advanced scenarios only, where you want to avoid passing helper functions deeply into the component tree, or want to access all states directly.

```tsx
const { states, start, stop } = useOryxContext();
```

- <ParameterRow
    name="states"
    type="Record<string, OryxState>"
    description="A map of message IDs to their respective Oryx states."
  />
- <ParameterRow
    name="start"
    type="(prompt: string) => void"
    description="Start a new chat request with the given prompt."
  />
- <ParameterRow
    name="stop"
    type="() => void"
    description="Stop all ongoing streaming requests."
  />

# `useOryxCurrentStage` <AnchorTag id="use-oryx-current-stage" />

Returns the current workflow stage for the message being processed.

> This hook must be used within `Oryx.Message.Agent` to read the current stage properly.

```tsx
const { currentStage } = useOryxCurrentStage();
```

- <ParameterRow
    name="currentStage"
    type="OryxSteppingStage | null"
    description="Current workflow stage: 'retrieval', 'generation', 'attribution', 'post_processing', or 'finalization'."
  />

# `useOryxToolCalls` <AnchorTag id="use-oryx-tool-calls" />

Returns tool call information for the current message, including filtering helpers.

> This hook must be used within `Oryx.Message.Agent` to access tool calls properly.

```tsx
const { toolCalls, hasToolCalls, activeToolCalls, completedToolCalls, failedToolCalls } = useOryxToolCalls();
```

- <ParameterRow
    name="toolCalls"
    type="OryxToolCall[]"
    description="Array of all tool calls for the current message."
  />
- <ParameterRow
    name="hasToolCalls"
    type="boolean"
    description="Whether there are any tool calls."
  />
- <ParameterRow
    name="activeToolCalls"
    type="OryxToolCall[]"
    description="Tool calls currently executing."
  />
- <ParameterRow
    name="completedToolCalls"
    type="OryxToolCall[]"
    description="Tool calls that completed successfully."
  />
- <ParameterRow
    name="failedToolCalls"
    type="OryxToolCall[]"
    description="Tool calls that failed."
  />

# `useOryxToolCallItem` <AnchorTag id="use-oryx-tool-call-item" />

Returns the tool call data for the current item.

> This hook must be used within `Oryx.ToolCalls.List`.

```tsx
const { toolCall } = useOryxToolCallItem();
```

- <ParameterRow
    name="toolCall"
    type="OryxToolCall"
    description="The tool call item data including id, name, arguments, output, status, and error."
  />

# `useOryxThinking` <AnchorTag id="use-oryx-thinking" />

Returns thinking/reasoning step information for the current message.

> This hook must be used within `Oryx.Message.Agent` to access thinking steps properly.

```tsx
const { thinkingSteps, hasThinking, activeThinking, completedThinking, currentThinking } = useOryxThinking();
```

- <ParameterRow
    name="thinkingSteps"
    type="OryxThinkingStep[]"
    description="Array of all thinking steps for the current message."
  />
- <ParameterRow
    name="hasThinking"
    type="boolean"
    description="Whether there are any thinking steps."
  />
- <ParameterRow
    name="activeThinking"
    type="OryxThinkingStep[]"
    description="Thinking steps still in progress."
  />
- <ParameterRow
    name="completedThinking"
    type="OryxThinkingStep[]"
    description="Thinking steps that have completed."
  />
- <ParameterRow
    name="currentThinking"
    type="OryxThinkingStep | null"
    description="The most recent thinking step (useful for showing current thinking)."
  />

# `useOryxThinkingStepItem` <AnchorTag id="use-oryx-thinking-step-item" />

Returns the thinking step data for the current item.

> This hook must be used within `Oryx.Thinking.List`.

```tsx
const { thinkingStep } = useOryxThinkingStepItem();
```

- <ParameterRow
    name="thinkingStep"
    type="OryxThinkingStep"
    description="The thinking step item data including id, content, summary, and isCompleted."
  />

# `useOryxWorkflowSteps` <AnchorTag id="use-oryx-workflow-steps" />

Returns workflow step information for the current message.

> This hook must be used within `Oryx.Message.Agent` to access workflow steps properly.

```tsx
const { workflowSteps, hasWorkflowSteps, activeSteps, completedSteps, failedSteps, currentStep } = useOryxWorkflowSteps();
```

- <ParameterRow
    name="workflowSteps"
    type="OryxWorkflowStep[]"
    description="Array of all workflow steps for the current message."
  />
- <ParameterRow
    name="hasWorkflowSteps"
    type="boolean"
    description="Whether there are any workflow steps."
  />
- <ParameterRow
    name="activeSteps"
    type="OryxWorkflowStep[]"
    description="Workflow steps currently running."
  />
- <ParameterRow
    name="completedSteps"
    type="OryxWorkflowStep[]"
    description="Workflow steps that completed successfully."
  />
- <ParameterRow
    name="failedSteps"
    type="OryxWorkflowStep[]"
    description="Workflow steps that failed."
  />
- <ParameterRow
    name="currentStep"
    type="OryxWorkflowStep | null"
    description="The most recent workflow step."
  />

# `useOryxWorkflowStepItem` <AnchorTag id="use-oryx-workflow-step-item" />

Returns the workflow step data for the current item.

> This hook must be used within `Oryx.WorkflowSteps.List`.

```tsx
const { workflowStep } = useOryxWorkflowStepItem();
```

- <ParameterRow
    name="workflowStep"
    type="OryxWorkflowStep"
    description="The workflow step item data including id, name, type, and status."
  />

# `useOryxIntermediateSteps` <AnchorTag id="use-oryx-intermediate-steps" />

Returns all intermediate steps (tool calls, thinking, workflow) in chronological order. Useful for building a unified activity log or trajectory view.

> This hook must be used within `Oryx.Message.Agent` to access intermediate steps properly.

```tsx
const { steps, hasSteps, currentStage } = useOryxIntermediateSteps();
```

- <ParameterRow
    name="steps"
    type="OryxIntermediateStep[]"
    description="Array of all intermediate steps sorted by timestamp. Each step has a type ('tool_call', 'thinking', or 'workflow'), data, and timestamp."
  />
- <ParameterRow
    name="hasSteps"
    type="boolean"
    description="Whether there are any intermediate steps."
  />
- <ParameterRow
    name="currentStage"
    type="OryxSteppingStage | null"
    description="Current workflow stage."
  />

<AfterContentNavigation
  prevLabel={"Proxy Customization"}
  prevHref={"/proxy"}
  nextLabel={"Advanced Usage"}
  nextHref={"/advanced"}
/>
